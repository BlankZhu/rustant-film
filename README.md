# rustant-film

Add an instant-film-style layout to your EXIF photos.

## Samples

| index | layout | image |
|---|---|---|
| 1 | Diagonal, pos left with paddings | ![IMG2](https://private-user-images.githubusercontent.com/16359708/404492647-758ab25f-9b53-4c5c-97b4-37983f2ea3f9.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzcxNzMzODEsIm5iZiI6MTczNzE3MzA4MSwicGF0aCI6Ii8xNjM1OTcwOC80MDQ0OTI2NDctNzU4YWIyNWYtOWI1My00YzVjLTk3YjQtMzc5ODNmMmVhM2Y5LmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE4VDA0MDQ0MVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTJlMzJiMmIwYTEyNGViOWYxY2Y5OTA4OWEwOTRmNmY3ZWNjNGVhNDg2ZjUyZjQ4NTI0OTM4OGJkMWJhYmY5NzYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.l6V3YtlEq2-FTwTmM-nxhi7ZzG7db5NIOdhe1Uele6g) |
| 2 | Diagonal, pos right | ![IMG3](https://private-user-images.githubusercontent.com/16359708/404492686-e77d5da3-7577-4840-9345-88cf76112590.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzcxNzMzODEsIm5iZiI6MTczNzE3MzA4MSwicGF0aCI6Ii8xNjM1OTcwOC80MDQ0OTI2ODYtZTc3ZDVkYTMtNzU3Ny00ODQwLTkzNDUtODhjZjc2MTEyNTkwLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE4VDA0MDQ0MVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTQ4OWM4ZTY2MjUzMmRkZmQ4ZjYwNTE2N2ExMjViNjY0YjEyM2FhMDM3MTViZmUyMDM1NDczY2VhMDUxZjQzZWImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.YBw9JnW5ulLLR5I_wMHt6deGINdy75kH2hBTo5rZcHs) |
| 3 | Duel, pos left | ![IMG5](https://private-user-images.githubusercontent.com/16359708/404492731-419cfc4d-63d4-451f-8072-f88dbe825a7c.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzcxNzMzODEsIm5iZiI6MTczNzE3MzA4MSwicGF0aCI6Ii8xNjM1OTcwOC80MDQ0OTI3MzEtNDE5Y2ZjNGQtNjNkNC00NTFmLTgwNzItZjg4ZGJlODI1YTdjLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE4VDA0MDQ0MVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTQ0M2RmOTRiM2ExNzI1ZmZlMDk4Y2NmYWRiZjhmMjAxMDkzMmZiOWQ2MWQ5NzY1MTk3NjlhNGE5Y2M4YmEwMDUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.HWHuXocVPK8DKiSkhXRbMu0B7Fn_-6Rp8iSE5UvUja4) |
| 4 | Duel, pos right with paddings | ![IMG6](https://private-user-images.githubusercontent.com/16359708/404492792-3ea98f75-f8fa-4bb0-82f0-8e9acf3b571c.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzcxNzMzODEsIm5iZiI6MTczNzE3MzA4MSwicGF0aCI6Ii8xNjM1OTcwOC80MDQ0OTI3OTItM2VhOThmNzUtZjhmYS00YmIwLTgyZjAtOGU5YWNmM2I1NzFjLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE4VDA0MDQ0MVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWEyYTdhNzhlMmViNDk5ZDkzN2QxYTljOGJmMzk1ODQxNTIxMGMzNGNmMDEzOTFjYzJlMDMyMjhmNmZiYmI5ODImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.skRXU8jKR7FrrLnFT1Gzfp1OILUTZ2OrJ_WAsGx5xFQ) |
| 6 | Triangular, pos bottom with paddings | ![IMG9](https://private-user-images.githubusercontent.com/16359708/404492831-bf2d47c0-c590-4bc7-ba28-b904ab74781d.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzcxNzMzODEsIm5iZiI6MTczNzE3MzA4MSwicGF0aCI6Ii8xNjM1OTcwOC80MDQ0OTI4MzEtYmYyZDQ3YzAtYzU5MC00YmM3LWJhMjgtYjkwNGFiNzQ3ODFkLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE4VDA0MDQ0MVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWQ2ZGEyZGIxOGE2MDYwOGZmNmI4Y2I5OTQ1OTg3NTUyODRlNjI3YWM1YWJiNzY4NWE0YTIyZmVmZTdjYzg4ZTYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.sBsUwXKQLmCk-5AHjLJQyY6bG8cUjNeqoad1AkR-ux4) |
| 7 | Triangular, pos bottom | ![IMG11](https://private-user-images.githubusercontent.com/16359708/404493071-280f6068-eb52-4539-b849-61f88f0e7638.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzcxNzMzODEsIm5iZiI6MTczNzE3MzA4MSwicGF0aCI6Ii8xNjM1OTcwOC80MDQ0OTMwNzEtMjgwZjYwNjgtZWI1Mi00NTM5LWI4NDktNjFmODhmMGU3NjM4LmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE4VDA0MDQ0MVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWJkNjQwZjg5MjJhM2VmOTNlYmQ2NTZmNWQ2OGEyODA0ZGRlMTJmN2NlYzRhOGJjMmYzNTk0MmUyY2EwOGYxYmMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.pcfLcR6dVr9qFdb9jFKhPWAa7AXqNWoocDqCfPZ2Ur4) |

## Features

- Written in Rust.
- Provides both command line & server API.
- Customizable logo & font.
- Cross-platfrom by cargo.

## Quick Start

To get started, first compile `rustant-film` using `cargo`:

```
cargo build --release
```

Then run the following command to setup some essential meterials:

```shell
# You may need to install some commands used by the scripts, such as 'wget', 'unzip', and 'convert'.
sh ./setup-example/font.sh
sh ./setup-example/logo.sh
sh ./setup-example/sample.sh
```

This will generate example fonts, logos, and a sample photo under the `./resources` directory.

Finally, run the following command:

```shell
./target/release/rustant-film -i ./resources/samples -o ./output -f ./resources/font/ttf/FiraCode-SemiBold.ttf -l ./resources/logos
```

The output will be saved in the `./output` directory.

For a more detailed guide on preparing media resources, refer to [here](./setup-example/readme.md).

## Layouts

Currently, `rustant-film` supports the following layouts:

- `triangle`: A traditional instant film layout with EXIF information displayed below.
- `blank`: A raw instant film with only blank paddings, no extra info added.
- `duel`: A layout with EXIF information displayed on left or right.
- `diagonal`: A layout like `duel` by display EXIF information on top-left or bottom-right.

```shell
./rustant-film -i ./resources/samples -o ./output -f ./resources/font/ttf/FiraCode-Regular.ttf -l ./resources/logos -p triangle
```

For a more classic instant film style, add padding around by using flag `-pad`:

```shell
./rustant-film -i ./resources/samples -o ./output -f ./resources/font/ttf/FiraCode-Regular.ttf -l ./resources/logos -p triangle --pad
```

Some layout may use a sub-font to get a better look. To use a sub-font, use `--sub-font`:

```shell
./rustant-film -i ./resources/samples -o ./output -f ./resources/font/ttf/FiraCode-SemiBold.ttf --sub-font ./resources/font/ttf/FiraCode-Regular.ttf -l ./resources/logos -p triangle --pad
```

## Server

In addition to the command-line interface, `rustant-film` can also operate as an HTTP server. This allows you to generate and download files via RPC.

To run `rustant-film` in server mode, use the command like:

```shell
./rustant-film -m server -f ./resources/font/ttf/FiraCode-SemiBold.ttf --sub-font ./resources/font/ttf/FiraCode-Regular.ttf
```

Once the server is running, you can send requests to the API. For example, to process an image, use the following `curl` command:

```shell
curl --output result.jpg 'http://0.0.0.0:6400/api/v1/develop?painter=diagonal&pad=false&pos=r' \
    -X POST \
    -H "Content-Type: multipart/form-data" \
    -F 'image=@./test.jpg'
```

This will generate and return the processed image as `result.jpg`.

## Roadmap

`rustant-film` aims to implement the following features in future versions:

- `More Layout`: Additional instant film layout options.
- `Adaptive Layout`: Automatically adjusts the layout for photos with missing EXIF data.
- `Watermark`: Adds watermarks, including invisible ones, to processed photos.
- `Copyright Support`: Allows users to add custom copyright information, such as the artist's name, to the final photo.
- `Async HTTP API`: Hosts the `rustant-film` command as an HTTP API server, providing asynchronous APIs.
- `GUI`: Add a GUI for `rustant-film`, maybe as a new project.
- `Container Image`: Distributes the `rustant-film` command-line tool and HTTP API as a container image.
- `Cargo Binary Publishing`: Publishes the `rustant-film` command as a binary on crates.io.
- `Lens Logo Support`: Some layouts may include lens logos.

## Credit

### Sample Fonts

- "[FiraCode](https://github.com/tonsky/FiraCode)" by Nikita Prokopov, used under OFL-1.1 license.

### Sample Images

`rustant-film` will add instant film layout to the following images in showcase.

- "[Dahlia-in-bloom](https://commons.wikimedia.org/wiki/File:Dahlia-in-bloom.jpg)" by Changku88, used under CC BY-SA 4.0. <!-- Apple -->
- "[Kranhäuser Cologne, April 2018-01](https://commons.wikimedia.org/wiki/File:Kranh%C3%A4user_Cologne,_April_2018_-01.jpg)" by Martin Falbisoner, used under CC BY-SA 4.0. <!-- Canon -->
- "[Dendermonde town hall and belfry during golden hour](https://commons.wikimedia.org/wiki/File:Dendermonde_town_hall_and_belfry_during_golden_hour_(DSCF0501).jpg)" by Trougnouf, used under CC BY-SA 4.0. <!-- Fujifilm -->
- "[Annunciazione Santuario del Carmine San Felice del Benaco](https://commons.wikimedia.org/wiki/File:Annunciazione_Santuario_del_Carmine_San_Felice_del_Benaco.jpg)" by Wolfgang Moroder, used under CC BY-SA 4.0. <!-- Hasselblad -->
- "[Boat passing under Elgin Bridge during blue hour (2023)](https://commons.wikimedia.org/wiki/File:Boat_passing_under_Elgin_Bridge_during_blue_hour_(2023)-L1003785.jpg)" by Frank Schulenburg, used under CC BY-SA 4.0. <!-- Leica -->
- "[Puppy de Jeff Koons -- 2021 -- Bilbao, España](https://commons.wikimedia.org/wiki/File:Puppy_de_Jeff_Koons_--_2021_--_Bilbao,_Espa%C3%B1a.jpg)" by Jose María Ligero Loarte, used under CC BY-SA 4.0. <!-- Nikon -->
- "[Love padlocks on the Butchers' Bridge (Ljubljana)](https://commons.wikimedia.org/wiki/File:Love_padlocks_on_the_Butchers%27_Bridge_(Ljubljana).jpg)" by Petar Milošević, used under CC BY-SA 4.0. <!-- Olympus -->
- "[Akelei Blüte geschlossen stacking-20230506-RM-120202](https://commons.wikimedia.org/wiki/File:Akelei_Bl%C3%BCte_geschlossen_stacking-20230506-RM-120202.jpg)" by Ermell, used under CC BY-SA 4.0. <!-- OM Digital Solutions -->
- "[Parboiled rice with chicken, peppers, cucurbita, peas and tomato](https://commons.wikimedia.org/wiki/File:Parboiled_rice_with_chicken,_peppers,_cucurbita,_peas_and_tomato.jpg)" by Petar Milošević, used under CC BY-SA 4.0. <!-- Panasonic -->
- "[York Railway Museum in Evening Lights - Pastel Theme](https://commons.wikimedia.org/wiki/File:York_Railway_Museum_in_Evening_Lights_-_Pastel_Theme.jpg)" by Nedian91, used under CC BY-SA 4.0. <!-- Pantex -->
- "[D-6-73-141-83 Sühnekreuz in der Merklach 3](https://commons.wikimedia.org/wiki/File:D-6-73-141-83_S%C3%BChnekreuz_in_der_Merklach_3.jpg)" by Stephan van Helden, used under CC BY-SA 4.0. <!-- Ricoh -->
- "[Khairdeen urf Pritam, Black and White](https://commons.wikimedia.org/wiki/File:Khairdeen_urf_Pritam,_Black_and_White.jpg)" by Satdeep Gill, used under CC BY-SA 4.0. <!-- Sony -->
